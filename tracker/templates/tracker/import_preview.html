{% extends "tracker/base.html" %}
{% load dict_extras %}

{% block title %}Preview Import{% endblock %}

{% block content %}
  <div class="section-header">
    <h2>Preview CSV Import</h2>
    <p class="muted-note">Confirm the data looks correct before importing.</p>
  </div>

  <table class="import-table">
    <thead>
      <tr>
        {% for col in column_map.keys %}
          <th>{{ col|title }}</th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
      {% for row in preview_rows %}
        <tr>
          {% for key in column_map.keys %}
          <td>{{ row|get_item:key }}</td>
          {% endfor %}
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <form method="post" action="{% url 'import_csv_confirm' %}" class="import-actions">
    {% csrf_token %}
    <button type="submit" class="btn btn-primary">Confirm Import</button>
  </form>
{% endblock %}
